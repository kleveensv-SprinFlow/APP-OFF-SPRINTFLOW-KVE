-- Alter workouts table to support block-based course structure
ALTER TABLE workouts
DROP COLUMN IF EXISTS courses_json;

ALTER TABLE workouts
ADD COLUMN courses_json JSONB DEFAULT '[]'::jsonb;

COMMENT ON COLUMN workouts.courses_json IS
'Array of course blocks: [
  {
    "id": "string",
    "series": "number",
    "reps": "number",
    "distance": "number",
    "restBetweenReps": "string",
    "restBetweenSeries": "string",
    "chronos": "[[(number | null)]]"
  }
]';